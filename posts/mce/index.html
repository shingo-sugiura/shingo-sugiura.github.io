<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Monte Carlo Estimator" /><meta property="og:locale" content="en" /><meta name="description" content="Light Transport Simulation의 기본이 되는 Monte Carlo Estimator와 분산을 효과적으로 줄이는 기법인 Importance Sampling에 대해 알아보자." /><meta property="og:description" content="Light Transport Simulation의 기본이 되는 Monte Carlo Estimator와 분산을 효과적으로 줄이는 기법인 Importance Sampling에 대해 알아보자." /><link rel="canonical" href="https://shingo-sugiura.github.io/posts/mce/" /><meta property="og:url" content="https://shingo-sugiura.github.io/posts/mce/" /><meta property="og:site_name" content="Cozy World Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-08-02T23:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Monte Carlo Estimator" /><meta name="twitter:site" content="@ssugiura" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-08-09T05:45:42+09:00","datePublished":"2023-08-02T23:00:00+09:00","description":"Light Transport Simulation의 기본이 되는 Monte Carlo Estimator와 분산을 효과적으로 줄이는 기법인 Importance Sampling에 대해 알아보자.","headline":"Monte Carlo Estimator","mainEntityOfPage":{"@type":"WebPage","@id":"https://shingo-sugiura.github.io/posts/mce/"},"url":"https://shingo-sugiura.github.io/posts/mce/"}</script><title>Monte Carlo Estimator | Cozy World Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cozy World Blog"><meta name="application-name" content="Cozy World Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">Cozy World Blog</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/shingo-sugiura" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/ssugiura" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['ssugiura','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Monte Carlo Estimator</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Monte Carlo Estimator</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/shingo-sugiura">Shingo Sugiura</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2023-08-02 23:00:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 2, 2023, 11:00 PM +0900" >Aug 2</em> </span> <span> Updated <em class="timeago" date="2023-08-09 05:45:42 +0900 " data-toggle="tooltip" data-placement="bottom" title="Wed, Aug 9, 2023, 5:45 AM +0900" >Aug 9</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1934 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>Light Transport Simulation의 기본이 되는 Monte Carlo Estimator와 분산을 효과적으로 줄이는 기법인 Importance Sampling에 대해 알아보자.</p><h2 id="기댓값과-분산">기댓값과 분산<a href="#기댓값과-분산" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="기댓값-expected-value">기댓값 Expected Value<a href="#기댓값-expected-value" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>확률론에서 확률 변수의 기댓값이란 어떤 랜덤 프로세스를 반복했을 때 기대할 수 있는 값의 평균이다. 확률 변수 $X$의 기댓값은 $E[X]$로 쓴다. 이산 확률 변수의 기댓값은 다음과 같이,</p>\[E[X]_{X\sim{p}} = \sum_{i=1}^{n} {x_i} \cdot p(x_i)\]<p>연속 활률 변수의 기댓값은 다음과 같이 정의된다.</p>\[E[X]_{X\sim{p}} = \int_{\Omega} x \cdot p(x) dx\]<h4 id="예시">예시<a href="#예시" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>주사위 던지기는 랜덤 프로세스다. 확률 변수 $X$ 가 주사위를 던져서 나온 숫자를 나타낸다고 생각해보자. 가능한 $X$ 는 $1, 2, 3, 4, 5, 6$ 이고 모든 값은 동일한 확률 $\frac{1}{6}$ 로 발생한다. 따라서 이 랜덤 프로세스의 기댓값은 다음과 같이 계산할 수 있다.</p>\[E[X] = \sum_{x=1}^{6} x \cdot \frac{1}{6} = 3.5\]<h3 id="분산-variance">분산 Variance<a href="#분산-variance" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>확률 변수의 분산은 각 변수들이 평균(기댓값)으로부터 얼마나 흩어져 있는지를 나타내는 지표다. 확률 변수 $X$의 분산은 $V[X]$로 쓰고 다음과 같이 정의된다.</p>\[V[X] = E[(X-E[X])^2]\]<h4 id="예시-1">예시<a href="#예시-1" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><p>주사위 던지기를 일반적인 주사위와 모든 면에 3.5가 적힌 주사위로 진행하면 두 경우 모두 기댓값은 3.5로 동일하겠으나 일반적인 주사위의 분산은</p>\[V[X] = \sum_{x=1}^{6} (x - 3.5)^2 \cdot \frac{1}{6} = \frac{17.5}{6} \approx 2.9167\]<p>이고 모든 면이 3.5인 주사위는 0이다. 실제로 시행을 반복해 기댓값을 구하는 경우 분산이 작다면 몇번의 시행만으로 기댓값을 구할 수 있겠지만 반대로 분산이 아주 크다면 시행을 아주 많이 반복해야 기댓값에 수렴할 것이다.</p><h3 id="특성들">특성들<a href="#특성들" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>기댓값과 분산의 정의에 따라 임의의 상수 $c$에 대해 다음이 만족한다.</p>\[\begin{aligned} E[c \, X] &amp;= c \, E[X] \\ V[c \, X] &amp;= c^2 \, V[X] \\ \end{aligned}\]<p>기댓값과 분산의 선형성에 따라 다음 등식도 만족한다. (분산의 경우 $X_i$가 서로 독립이어야 한다.)</p>\[\begin{aligned} E \Big[ \sum_{i=1}^{N} X_i \Big] =&amp; \sum_{i=1}^{N} E[X_i] \\ V \Big[ \sum_{i=1}^{N} X_i \Big] =&amp; \sum_{i=1}^{N} V[X_i] \\ \end{aligned}\]<p>위 특성들로 분산을 간단히 쓸 수 있다.</p>\[V[X] = E[(X-E[X])^2] = E[X^2] - E[X]^2\]<h2 id="monte-carlo-estimator">Monte Carlo Estimator<a href="#monte-carlo-estimator" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>우리는 적분값 $ I = \int_{\Omega} f(x) dx $ 을 수치적인 방법으로 구하고자 한다. 우선 고등학교때 배운 구분구적법(리만 합)을 적용한다면 다음과 같이 유한 합으로 적분 값을 추정할 수 있다. (x축 변이 균등하게 잘린 직사각형을 순서대로 모두 더하는 상황)</p>\[I \approx \frac{b-a}{N} \sum_{i=1}^{N} f(x_i)\]<p>위 식을 균등 확률 변수(uniform random variable) $X_i \in [a,b]$로 우항의 식을 Evaluation하는 랜덤 프로세스라고 보고 기댓값을 구해보자.</p>\[F_N = \frac{b-a}{N} \sum_{i=1}^{N} f(X_i)\] \[\begin{aligned} E[F_N] &amp;= E[\frac{b-a}{N} \sum_{i=1}^{N} f(X_i)] \\ &amp;= \frac{b-a}{N} \sum_{i=1}^{N} E[f(X_i)] \\ &amp;= \frac{b-a}{N} \sum_{i=1}^{N} \int_a^b f(x)p(x) dx \\ &amp;= \frac{b-a}{N} \sum_{i=1}^{N} \int_a^b f(x) \frac{1}{b-a} dx \\ &amp;= \frac{1}{N} \sum_{i=1}^{N} \int_a^b f(x) dx \\ &amp;= \int_a^b f(x) dx \end{aligned}\]<p>결과적으로 이 랜덤 프로세스의 기댓값은 적분값이 된다.</p><p>확률 분포 함수(pdf) $p(x)$ 가 uniform이라는 제약을 일반화 하면 Estimator를 다음과 같이 쓸 수 있다.</p>\[F_N = \frac{1}{N} \sum_{i=1}^{N} \frac{f(X_i)}{p(X_i)}\]<p>단, $ | f(x) | &gt; 0$ 인 부분에서 $p(x) &gt; 0$ 이어야 한다. 이 식이 적분값이 되는지 간단히 확인해 보면,</p>\[\begin{aligned} E[F_N] &amp;= E[\frac{1}{N} \sum_{i=1}^{N} \frac{f(X_i)}{p(X_i)}] \\ &amp;= \frac{1}{N} \sum_{i=1}^{N} E[\frac{f(X_i)}{p(X_i)}] \\ &amp;= \frac{1}{N} \sum_{i=1}^{N} \int_{\Omega} \frac{f(x)}{p(x)} p(x) dx \\ &amp;= \frac{1}{N} \sum_{i=1}^{N} \int_{\Omega} f(x) dx \\ &amp;= \int_{\Omega} f(x) dx \end{aligned}\]<h2 id="분산-감소-기법">분산 감소 기법<a href="#분산-감소-기법" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>Monte Carlo Estimator를 이용해 적분 값을 추정하는 과정은 시행을 반복해 기댓값을 수치적으로 구하는 과정이다. 우리는 이 랜덤 프로세스의 분산을 생각할 수 있다. Estimator의 분산은 이미지에 노이즈로 나타나게 되고 곧 렌더링 품질을 가른다. 따라서 렌더링에서 Estimator의 분산을 줄이는 작업은 매우 중요하고 렌더링 기법의 발전이 분산을 줄이는 과정이라고 말해도 과언이 아니다.</p><p>Monte Carlo Estimator의 분산을 분석하고 분산을 감소시키는 대표적인 기법인 Importance Sampling을 알아보자.</p><h3 id="분산-분석">분산 분석<a href="#분산-분석" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>분산의 정의에 따라 Estimator의 분석을 계산해 보면</p>\[\begin{aligned} V[F_N] &amp;= V[\frac{1}{N} \sum_{i=1}^{N} \frac{f(X_i)}{p(X_i)}] \\ &amp;= \frac{1}{N^2} \sum_{i=1}^{N} V[\frac{f(X_i)}{p(X_i)}] \\ &amp;= \frac{1}{N} V[\frac{f(X)}{p(X)}] \\ \end{aligned}\]<p>위 식을 통해 $N$에 따라 선형적으로 분산이 감소한다는 것을 알 수 있고,</p>\[\sigma [F_N] = \frac{1}{\sqrt{N}} \sigma \Big[\frac{f(X)}{p(X)} \Big]\]<p>표준편차로부터 RMS(Root Mean Square; 평균 제곱근) Error는 $O(N^{0.5})$ 의 속도로 수렴함을 알 수 있다. (absolute error의 수렴 속도를 분석하는 부분은 3번째 레퍼런스 2.4.1을 참고해 주세요. 이는 마찬가지로 $O(N^{0.5})$ 입니다. )</p><p>Monte Carlo Estimator의 유일한 약점(?)이 수렴 속도가 $O(N^{0.5})$ 으로 꽤 느리다는 것인데, 이 문제를 해결하기 위해 다양한 분산 감소 기법을 사용한다.</p><h3 id="importance-sampling">Importance Sampling<a href="#importance-sampling" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>Importance Sampling을 통한 분산 감소의 핵심은 샘플을 생성하는 확률 분포 함수 $p$를 우리가 자유롭게 선택할 수 있다는 부분에 있다.</p><p>단적인 예시로 $p$를 피적분 함수 $f$ 에 비례하게 설정하는 경우를 생각해보자. $p \propto f,\, p(x) = cf(x)$. 확률 분포 함수는 정규화($\int_{\Omega} p(x) dx = 1$) 되어야 하기 때문에</p>\[c = \frac{1}{\int_{\Omega} f(x)dx}\]<p>그러나 이러한 확률 분포 함수는 우리가 처음에 추정하려던 적분의 값을 알아야 한다. 결국 처음 풀고자 하는 문제로 돌아온 셈이다. 그럼에도 불구하고 만약 이런 확률 분포 함수로부터 샘플링하는 경우를 생각해 본다면,</p>\[\frac{f(X_i)}{p(X_i)} = \frac{1}{c} = \int f(x) dx\]<p>언제나 한번의 evaluation 만으로 적분 값을 추정할 수 있게 될 것이다. 즉 분산이 0인 것이다.</p>\[\begin{aligned} V[F_N] &amp;= \frac{1}{N} V[\frac{f(X)}{p(X)}] \\ &amp;= \frac{1}{N} V[\frac{1}{c}] \\ &amp;= 0 \end{aligned}\]<p>물론 위 방식이 practical 하지는 않지만, $f$와 모양(Shape)이 비슷한 pdf $p$를 선택하면 Estimator의 분산은 감소한다.</p><p>정리하자면 Importance Sampling의 기본적인 아이디어는 피적분 함수값이 큰 부분에 샘플링을 많이 해서 분산을 줄이자는 내용이다. 당연히 피적분 함수값이 큰 부분은 결과에 크게 기여하고 함수값이 작은 부분은 적게 기여할 것이다.</p><p>일반적인 경우 피적분 함수 $f$의 특정 factor에 대해 Importance Sampling하는 식으로 많이 쓰인다. 예를 들어 렌더링 방정식의 경우 BRDF와 Geometry term에 대해 Importance Sampling해서 해당 항으로 부터 나오는 분산을 줄인다. 특정 factor에 대한 정확한 샘플링 루틴이 존재하는 경우 Evaluation 단계에서 해석적으로 해당 항을 약분할 수도 있다.</p><h2 id="정리">정리<a href="#정리" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li>우리는 Monte Carlo Estimator를 이용해 어떠한 함수의 적분값도 랜덤 프로세스로 추정할 수 있다.<li>Estimator의 분산을 줄이기 위해 Importance Sampling 같은 분산 감소 기법을 사용한다.</ul><h2 id="참조">참조<a href="#참조" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>[1] <a href="https://www.pbr-book.org/3ed-2018/Monte_Carlo_Integration/The_Monte_Carlo_Estimator">https://www.pbr-book.org/3ed-2018/Monte_Carlo_Integration/The_Monte_Carlo_Estimator</a><br /> [2] <a href="https://scholarsarchive.byu.edu/cgi/viewcontent.cgi?article=1662&amp;context=etd">https://scholarsarchive.byu.edu/cgi/viewcontent.cgi?article=1662&amp;context=etd</a><br /> [3] <a href="https://www.ime.usp.br/~jmstern/wp-content/uploads/2020/04/EricVeach2.pdf">https://www.ime.usp.br/~jmstern/wp-content/uploads/2020/04/EricVeach2.pdf</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/math/'>Math</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/note/" class="post-tag no-text-decoration" >Note</a> <a href="/tags/rendering/" class="post-tag no-text-decoration" >Rendering</a> <a href="/tags/sampling/" class="post-tag no-text-decoration" >Sampling</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Monte Carlo Estimator - Cozy World Blog&url=https://shingo-sugiura.github.io/posts/mce/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Monte Carlo Estimator - Cozy World Blog&u=https://shingo-sugiura.github.io/posts/mce/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Monte Carlo Estimator - Cozy World Blog&url=https://shingo-sugiura.github.io/posts/mce/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/mis/">Multiple Importance Sampling</a><li><a href="/posts/sir/">Sampling Importance Resampling</a><li><a href="/posts/mce/">Monte Carlo Estimator</a><li><a href="/posts/wrs/">Weighted Reservoir Sampling</a><li><a href="/posts/pairing-function/">Pairing function, 짝짓기 함수</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/note/">Note</a> <a class="post-tag" href="/tags/rendering/">Rendering</a> <a class="post-tag" href="/tags/sampling/">Sampling</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/physics-engine/">Physics Engine</a> <a class="post-tag" href="/tags/physics/">Physics</a> <a class="post-tag" href="/tags/programming/">Programming</a> <a class="post-tag" href="/tags/%EC%9E%A1%EB%8B%B4/">잡담</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/wrs/"><div class="card-body"> <em class="timeago small" date="2023-07-31 23:00:00 +0900" >Jul 31</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Weighted Reservoir Sampling</h3><div class="text-muted small"><p> 문제 설명 어떤 데이터 $ E_i \, (1 \le i \le N) $ 스트림이 있는데 시점 $t$ 에 $E_t$ 를 볼 수 있고 스트림의 총 길이 $N$ 은 미리 알 수 없다. 각 $E_i$ 에 가중치 $w_i$ 가 주어지고 우리는 가중치에 비례해 데이터를 샘플링 하고 싶다. 즉, 총 가중치 $ W = \sum_{k \le N} w_k $ 로 모...</p></div></div></a></div><div class="card"> <a href="/posts/mis/"><div class="card-body"> <em class="timeago small" date="2023-08-08 02:00:00 +0900" >Aug 8</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Multiple Importance Sampling</h3><div class="text-muted small"><p> Multi-sample Estimator 바로 이전 포스트에서 Monte Carlo Estimator에 대해 알아봤다. \[F_N = \frac{1}{N} \sum_{i=1}^{N} \frac{f(X_i)}{p(X_i)}\] Estimator의 기댓값은 구하고자 하는 적분값이 되고, 이 결과는 편향이 없는(unbiased) 정확한 방법이다. \...</p></div></div></a></div><div class="card"> <a href="/posts/sir/"><div class="card-body"> <em class="timeago small" date="2023-08-11 10:00:00 +0900" >Aug 11</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Sampling Importance Resampling</h3><div class="text-muted small"><p> Sampling Importance Resampling(간단하게 Importance Resampling)은 임의의 분포로부터 샘플을 생성하는 알고리즘이다. 어떤 복잡한 분포든 evaluation만 가능하다면 그 분포에 근사하여 샘플을 생성할 수 있다. 정규화 되지 않은(unnormalized) 분포 $ \hat p $ 와 정규화된 분포(pdf) $p...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/wrs/" class="btn btn-outline-primary" prompt="Older"><p>Weighted Reservoir Sampling</p></a> <a href="/posts/mis/" class="btn btn-outline-primary" prompt="Newer"><p>Multiple Importance Sampling</p></a></div><script src="https://utteranc.es/client.js" repo="shingo-sugiura/blog-comments" issue-term="title" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/shingo-sugiura">Shingo Sugiura</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">All rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/note/">Note</a> <a class="post-tag" href="/tags/rendering/">Rendering</a> <a class="post-tag" href="/tags/sampling/">Sampling</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/math/">Math</a> <a class="post-tag" href="/tags/physics-engine/">Physics Engine</a> <a class="post-tag" href="/tags/physics/">Physics</a> <a class="post-tag" href="/tags/programming/">Programming</a> <a class="post-tag" href="/tags/%EC%9E%A1%EB%8B%B4/">잡담</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
